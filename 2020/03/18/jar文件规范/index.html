<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>jar文件规范 | xiaohua&#39;blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="jar文件规范1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001">
<meta property="og:type" content="article">
<meta property="og:title" content="jar文件规范">
<meta property="og:url" content="http://yoursite.com/2020/03/18/jar%E6%96%87%E4%BB%B6%E8%A7%84%E8%8C%83/index.html">
<meta property="og:site_name" content="xiaohua&#39;blog">
<meta property="og:description" content="jar文件规范1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-03-18T10:07:30.149Z">
<meta property="article:modified_time" content="2020-03-16T15:07:12.771Z">
<meta property="article:author" content="xiaohua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="xiaohua&#39;blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">xiaohua&#39;blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">每个微小的个体都有发光的权利</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/tags">tags</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-jar文件规范" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/03/18/jar%E6%96%87%E4%BB%B6%E8%A7%84%E8%8C%83/" class="article-date">
  <time datetime="2020-03-18T10:07:30.149Z" itemprop="datePublished">2020-03-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      jar文件规范
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="jar文件规范"><a href="#jar文件规范" class="headerlink" title="jar文件规范"></a>jar文件规范</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br></pre></td><td class="code"><pre><span class="line">介绍</span><br><span class="line">JAR文件是一种基于流行的ZIP文件格式的文件格式，用于将许多文件聚合到一个文件中。JAR文件本质上是一个zip文件，其中包含一个可选的META-INF目录。可以通过命令行jar工具或通过使用 Java平台中的  java.util.jar API 来创建JAR文件。对JAR文件的名称没有限制，它可以是特定平台上的任何合法文件名。</span><br><span class="line">在许多情况下，JAR文件不仅仅是Java类文件和/或资源的简单存档。它们用作应用程序和扩展的构建块。META-INF目录（如果存在）用于存储程序包和扩展配置数据，包括安全性，版本控制，扩展和服务。</span><br><span class="line"></span><br><span class="line">META-INF目录</span><br><span class="line">Java <span class="number">2</span> Platform识别并解释了META-INF目录中的以下文件/目录，以配置应用程序，扩展，类加载器和服务：</span><br><span class="line">清单文件</span><br><span class="line">用于定义扩展名和打包相关数据的清单文件。</span><br><span class="line">索引清单</span><br><span class="line">该文件由jar工具的新“ -i”选项生成，其中包含应用程序或扩展中定义的包的位置信息。它是JarIndex实现的一部分，由类加载器用来加速其类加载过程。</span><br><span class="line">SF</span><br><span class="line">JAR文件的签名文件。“ x”代表基本文件名。</span><br><span class="line">xDSA</span><br><span class="line">与具有相同基本文件名的签名文件关联的签名块文件。该文件存储相应签名文件的数字签名。</span><br><span class="line">服务/</span><br><span class="line">该目录存储所有服务提供商的配置文件。</span><br><span class="line">名称-值对和节</span><br><span class="line">在转到各个配置文件的内容的详细信息之前，需要定义一些格式约定。在大多数情况下，清单文件和签名文件中包含的信息表示为受RFC822标准启发的所谓“名称：值”对。我们也将这些对称为标头或属性。</span><br><span class="line">名称/值对的组称为“节”。各节用空行与其他节分开。</span><br><span class="line"></span><br><span class="line">任何形式的二进制数据都表示为base64。对于导致行长度超过<span class="number">72</span>个字节的二进制数据，需要连续进行。二进制数据的示例是摘要和签名。</span><br><span class="line"></span><br><span class="line">实现应支持最大<span class="number">65535</span>字节的报头值。</span><br><span class="line"></span><br><span class="line">本文档中的所有规范都使用相同的语法，其中终端符号以固定宽度的字体显示，非终端符号以斜体显示。</span><br><span class="line"></span><br><span class="line">规格：</span><br><span class="line">  部分：* header + newline</span><br><span class="line">  nonempty部分：+ header + newline</span><br><span class="line">  newline：                      CR LF | 低频| CR（不跟 LF）</span><br><span class="line">  标题：名称 ： 值</span><br><span class="line">  名称：alphanum * headerchar</span><br><span class="line">  值：                          SPACE * otherchar 换行符*连续</span><br><span class="line">  延续：               SPACE * otherchar换行符</span><br><span class="line">  alphanum：&#123; AZ &#125; | &#123; az &#125; | &#123; <span class="number">0</span>-<span class="number">9</span> &#125;</span><br><span class="line">  headerchar：字母数字 | - |_</span><br><span class="line">  otherchar：除 NUL，CR 和 LF 外的任何UTF-<span class="number">8</span>字符</span><br><span class="line">; 另外：为了防止通过直电子邮件，不发送的文件的重整</span><br><span class="line">; 标头将以四个字母“ From”开头。</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">在以上规范中定义的非终端符号将在以下规范中引用。</span><br><span class="line"></span><br><span class="line">JAR清单</span><br><span class="line">总览</span><br><span class="line">一个JAR文件清单包含一个主要部分，后面是各个JAR文件条目的部分列表，每个部分之间都用换行符分隔。主要部分和各个部分都遵循上面指定的部分语法。他们每个人都有自己的特定限制和规则。</span><br><span class="line">主要部分包含有关JAR文件本身以及该JAR文件所属的应用程序或扩展名的安全和配置信息。它还定义了适用于每个单独清单清单的主要属性。此部分中的任何属性名称都不能等于“ Name ”。此部分以空行终止。</span><br><span class="line"></span><br><span class="line">各个部分定义了此JAR文件中包含的程序包或文件的各种属性。并非JAR文件中的所有文件都需要在清单中作为条目列出，但是必须列出所有要签名的文件。清单文件本身不能列出。每个部分都必须以名称为“ Name ” 的属性开头，并且该值必须是文件的相对路径，或者是引用存档外部数据的绝对URL。</span><br><span class="line"></span><br><span class="line">如果同一文件条目有多个单独的节，则这些节中的属性将合并。如果某个属性在不同部分中具有不同的值，则将识别最后一个。</span><br><span class="line"></span><br><span class="line">无法理解的属性将被忽略。这样的属性可以包括应用程序使用的实现特定的信息。</span><br><span class="line"></span><br><span class="line">清单规格：</span><br><span class="line">  清单文件：main-section换行符* individual-section</span><br><span class="line">  main-section：版本信息换行符* main-attribute</span><br><span class="line">  版本信息：                      Manifest-Version： 版本号</span><br><span class="line">  version-number：digit + &#123; 。digit +&#125; *</span><br><span class="line">  main-attribute ：（任何合法的main属性）换行</span><br><span class="line">  单节：             名称： 值 newline * perentry-attribute</span><br><span class="line">  perentry-attribute ：（任何合法的perentry属性）newline</span><br><span class="line">  newline：                             CR LF | 低频| CR（不跟 LF）</span><br><span class="line">   数字：                                &#123;<span class="number">0</span>-<span class="number">9</span>&#125; </span><br><span class="line">在以上说明书中，可以出现在主要部分中的属性被称为主要属性，而可以出现在各个部分中的属性被称为按条目属性。某些属性可以同时出现在主要部分和各个部分中，在这种情况下，每个条目的属性值将覆盖指定条目的主要属性值。两种属性定义如下。</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">主要属性</span><br><span class="line">主要属性是清单的主要部分中存在的属性。它们分为以下不同的组：</span><br><span class="line">一般主要属性</span><br><span class="line">Manifest-Version：定义清单文件的版本。该值是合法的版本号，如以上规范中所述。</span><br><span class="line">Created-By：创建清单文件的基础，定义Java实现的版本和供应商。此属性由jar工具生成。</span><br><span class="line">签名版本：定义jar文件的签名版本。该值应该是有效的版本号 字符串。</span><br><span class="line">类路径：此属性的值指定此应用程序或扩展程序所需的扩展程序或库的相对URL。网址由一个或多个空格分隔。应用程序或扩展类加载器使用此属性的值来构造其内部搜索路径。有关详细信息，请参见 类路径属性部分。</span><br><span class="line">为独立应用程序定义的属性：捆绑到可执行jar文件中的独立应用程序使用此属性，可以通过java运行时直接通过运行“ java -jar x.jar ” 来调用这些文件。</span><br><span class="line">Main-Class：此属性的值是启动程序将在启动时加载的主应用程序类的类名。该值不得在类 名后附加<span class="class">.<span class="keyword">class</span>扩展名。</span></span><br><span class="line"><span class="class">为<span class="title">applet</span>定义的属性： 不推荐使用：在以后的发行版中可能会删除这些属性以及实现该属性的机制。 一个<span class="title">applet</span>使用这些属性，这些<span class="title">applet</span>捆绑在<span class="title">JAR</span>文件中，以定义该<span class="title">applet</span>所依赖的扩展的要求，版本和位置信息。（请参阅扩展版本控制）。</span></span><br><span class="line"><span class="class">扩展列表：此属性指示小程序所需的扩展。此属性中列出的每个扩展都将具有一组附加属性，小程序可使用这些附加属性来指定其所需的扩展版本和供应商。</span></span><br><span class="line"><span class="class">&lt;<span class="title">extension</span>&gt; -<span class="title">Extension</span>-<span class="title">Name</span>：此属性是扩展名的唯一名称。<span class="title">Java</span>插件将在已安装扩展的清单中将此属性的值与<span class="title">Extension</span>-<span class="title">Name</span>属性进行比较，以确定是否已安装该扩展。</span></span><br><span class="line"><span class="class">&lt;<span class="title">extension</span>&gt; -<span class="title">Specification</span>-<span class="title">Version</span>：此属性指定小程序所需的最小扩展规范版本。<span class="title">Java</span>插件将将此属性的值与已安装扩展的<span class="title">Specification</span>-<span class="title">Version</span>属性进行比较，以确定扩展是否为最新。</span></span><br><span class="line"><span class="class">&lt;<span class="title">extension</span>&gt; -<span class="title">Implementation</span>-<span class="title">Version</span>：此属性指定小程序所需的最小扩展实现版本号。<span class="title">Java</span>插件将将此属性的值与已安装扩展的<span class="title">Implementation</span>-<span class="title">Version</span>属性进行比较，以查看是否需要下载更新的实现。</span></span><br><span class="line"><span class="class">&lt;<span class="title">extension</span>&gt; -<span class="title">Implementation</span>-<span class="title">Vendor</span>-<span class="title">Id</span>：如果<span class="title">applet</span>需要特定供应商的实施，则此属性可用于标识扩展实施的供应商。<span class="title">Java</span>插件将将此属性的值与已安装扩展的<span class="title">Implementation</span>-<span class="title">Vendor</span>-<span class="title">Id</span>属性进行比较。</span></span><br><span class="line"><span class="class">&lt;<span class="title">extension</span>&gt; -<span class="title">Implementation</span>-<span class="title">URL</span>：如果尚未安装所需的版本，则此属性指定可用于获取扩展的最新版本的<span class="title">URL</span>。</span></span><br><span class="line"><span class="class">为扩展标识定义的属性：扩展使用此属性来定义其唯一标识。</span></span><br><span class="line"><span class="class">扩展名：此属性指定<span class="title">Jar</span>文件中包含的扩展名。名称应该是唯一的标识符，例如包含扩展名的主程序包的名称。</span></span><br><span class="line"><span class="class">为扩展名和包版本控制   以及密封信息定义的属性：这些属性定义<span class="title">JAR</span>文件所属的扩展名功能。这些属性的值适用于<span class="title">JAR</span>文件中的所有软件包，但是可以通过按条目属性覆盖。</span></span><br><span class="line"><span class="class"><span class="title">Implementation</span>-<span class="title">Title</span>：该值是一个字符串，用于定义扩展实现的标题。</span></span><br><span class="line"><span class="class"><span class="title">Implementation</span>-<span class="title">Version</span>：该值是一个字符串，用于定义扩展实现的版本。</span></span><br><span class="line"><span class="class">实施供应商：该值是一个字符串，用于定义维护扩展实施的组织。</span></span><br><span class="line"><span class="class"><span class="title">Implementation</span>-<span class="title">Vendor</span>-<span class="title">Id</span>：不建议使用：在将来的版本中，可以忽略此属性。 该值是一个字符串<span class="title">ID</span>，用于唯一定义维护扩展实施的组织。</span></span><br><span class="line"><span class="class">实施<span class="title">URL</span>：不推荐使用：在将来的版本中，可以忽略此属性。 此属性定义可从中下载扩展实现的<span class="title">URL</span>。</span></span><br><span class="line"><span class="class">规范标题：该值是一个字符串，用于定义扩展规范的标题。</span></span><br><span class="line"><span class="class"><span class="title">Specification</span>-<span class="title">Version</span>：该值是一个字符串，用于定义扩展规范的版本。</span></span><br><span class="line"><span class="class">规范供应商：该值是一个字符串，用于定义维护扩展规范的组织。</span></span><br><span class="line"><span class="class">密封的：此属性定义此<span class="title">JAR</span>文件是否密封。该值可以是“ <span class="title">true</span>”或“ <span class="title">false</span>”，忽略大小写。如果将其设置为“ <span class="title">true</span>”，则<span class="title">JAR</span>文件中的所有程序包均默认为密封的，除非另行单独定义。</span></span><br><span class="line"><span class="class">逐项属性</span></span><br><span class="line"><span class="class">按条目属性仅适用于清单条目与之关联的单个<span class="title">JAR</span>文件条目。如果相同的属性也出现在主要部分中，则按条目属性的值将覆盖主要属性的值。例如，如果<span class="title">JAR</span>文件<span class="title">a</span>.<span class="title">jar</span>具有以下清单内容：</span></span><br><span class="line"><span class="class">清单版本：1.0</span></span><br><span class="line"><span class="class">创建者：1.2（<span class="title">Sun</span> <span class="title">Microsystems</span> <span class="title">Inc</span>.）</span></span><br><span class="line"><span class="class">密封：真实</span></span><br><span class="line"><span class="class">名称：<span class="title">foo</span> / <span class="title">bar</span> /</span></span><br><span class="line"><span class="class">密封：假</span></span><br><span class="line"><span class="class">这意味着所有在<span class="title">a</span>.<span class="title">jar</span>中存档的软件包都是密封的，除了<span class="title">foo</span>.<span class="title">bar</span>没有。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">按条目属性分为以下几类：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">为文件内容定义的属性：</span></span><br><span class="line"><span class="class"><span class="title">Content</span>-<span class="title">Type</span>：此属性可用于为<span class="title">JAR</span>文件中的特定文件条目指定<span class="title">MIME</span>类型和数据子类型。该值应该是类型/子类型形式的字符串 。例如，“ <span class="title">image</span> / <span class="title">bmp</span>”是具有<span class="title">bmp</span>子类型的图像类型（表示位图）。这将指示文件条目为图像，数据存储为位图。<span class="title">RFC</span> 1521和1522讨论并定义<span class="title">MIME</span>类型定义。</span></span><br><span class="line"><span class="class">为软件包版本控制和密封信息定义的属性：这些属性与上面定义的主要属性相同，这组主要属性定义了扩展软件包版本控制和密封信息。当用作按条目的属性时，这些属性将覆盖主要属性，但仅适用于清单条目指定的单个文件。</span></span><br><span class="line"><span class="class">为<span class="title">bean</span>对象定义的属性：</span></span><br><span class="line"><span class="class"><span class="title">Java</span>-<span class="title">Bean</span>：定义特定的<span class="title">jar</span>文件条目是否为<span class="title">Java</span> <span class="title">Beans</span>对象。该值应为“ <span class="title">true</span>”或“ <span class="title">false</span>”，忽略大小写。</span></span><br><span class="line"><span class="class">为签名定义的属性：这些属性用于签名和验证。详情请点击这里。</span></span><br><span class="line"><span class="class"><span class="title">x</span>-<span class="title">Digest</span>-<span class="title">y</span>：此属性的名称指定用于计算相应<span class="title">jar</span>文件条目的摘要值的摘要算法的名称。此属性的值存储实际的摘要值。前缀“ <span class="title">x</span>”指定算法名称，可选后缀“ <span class="title">y</span>”表示摘要值应针对哪种语言进行验证。</span></span><br><span class="line"><span class="class">魔术：这是一个可选属性，应用程序可以使用该属性来指示验证者应如何计算清单条目中包含的摘要值。此属性的值是一组用逗号分隔的上下文特定的字符串。详细说明在这里。</span></span><br><span class="line"><span class="class">签名的<span class="title">JAR</span>文件</span></span><br><span class="line"><span class="class">总览</span></span><br><span class="line"><span class="class">可以使用命令行<span class="title">jarsigner</span>工具或直接通过<span class="title">java</span>.<span class="title">securityAPI</span> 对<span class="title">JAR</span>文件进行签名。<span class="title">META</span>-<span class="title">INF</span>如果<span class="title">JAR</span>文件由<span class="title">jarsigner</span>工具签名，则每个文件条目（包括目录中与签名无关的文件） 都将被签名。与签名相关的文件是：</span></span><br><span class="line"><span class="class"><span class="title">META</span>-<span class="title">INF</span>/<span class="title">MANIFEST</span>.<span class="title">MF</span></span></span><br><span class="line"><span class="class"><span class="title">META</span>-<span class="title">INF</span>/*.<span class="title">SF</span></span></span><br><span class="line"><span class="class"><span class="title">META</span>-<span class="title">INF</span>/*.<span class="title">DSA</span></span></span><br><span class="line"><span class="class"><span class="title">META</span>-<span class="title">INF</span>/*.<span class="title">RSA</span></span></span><br><span class="line"><span class="class"><span class="title">META</span>-<span class="title">INF</span>/<span class="title">SIG</span>-*</span></span><br><span class="line"><span class="class">请注意，如果此类文件位于<span class="title">META</span>-<span class="title">INF</span> 子目录中，则不会将其视为与签名相关。这些文件名的大小写不区分大小写，将保留并且也不会被签名。</span></span><br><span class="line"><span class="class">可以使用<span class="title">java</span>.<span class="title">securityAPI</span> 对<span class="title">JAR</span>文件的子集进行签名 。已签名的<span class="title">JAR</span>文件与原始<span class="title">JAR</span>文件完全相同，不同之处在于已更新其清单，并将两个其他文件添加到<span class="title">META</span>-<span class="title">INF</span> 目录中：签名文件和签名阻止文件。当不使用<span class="title">jarsigner</span>时，签名程序必须构造签名文件和签名块文件。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">对于在签名的<span class="title">JAR</span>文件中签名的每个文件条目，只要清单中不存在该清单条目，就会为其创建一个单独的清单条目。每个清单条目列出一个或多个摘要属性以及一个可选的<span class="title">Magic</span>属性。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">签名文件</span></span><br><span class="line"><span class="class">每个签名者都由带有扩展名的签名文件表示 .<span class="title">SF</span>。该文件的主要部分类似于清单文件。它包括一个主要部分，其中包括签名者提供的信息，但并不特定于任何特定的<span class="title">jar</span>文件条目。除了 <span class="title">Signature</span>-<span class="title">Version</span>和<span class="title">Created</span>-<span class="title">By</span> 属性（请参见<span class="title">Main</span> <span class="title">Attributes</span>），主要部分还可以包括以下安全属性：</span></span><br><span class="line"><span class="class"><span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>-<span class="title">Main</span>-<span class="title">Attributes</span>（其中<span class="title">x</span>是<span class="title">java</span>.<span class="title">security</span>.<span class="title">MessageDigest</span>算法的标准名称）：此属性的值是清单主要属性的摘要值。</span></span><br><span class="line"><span class="class"><span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>（其中<span class="title">x</span>是<span class="title">java</span>.<span class="title">security</span>.<span class="title">MessageDigest</span>算法的标准名称 ）：此属性的值是整个清单的摘要值。</span></span><br><span class="line"><span class="class">主要部分后面是各个条目的列表，这些条目的名称也必须出现在清单文件中。每个单独的条目必须至少包含清单文件中相应条目的摘要。</span></span><br><span class="line"><span class="class">计算中不使用清单文件中出现但签名文件中没有出现的路径或<span class="title">URL</span>。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">签名验证</span></span><br><span class="line"><span class="class">如果签名有效，则<span class="title">JAR</span>文件验证成功，并且自此以后，生成签名时<span class="title">JAR</span>文件中的文件均未更改。<span class="title">JAR</span>文件验证涉及以下步骤：</span></span><br><span class="line"><span class="class">首次解析清单时，请验证签名文件上的签名。为了提高效率，可以记住此验证。请注意，此验证仅验证签名指示本身，而不验证实际的存档文件。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">如果<span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>签名文件中存在属性，请对照整个清单计算的摘要来验证该值。如果<span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>签名文件中存在多个 属性，请验证其中至少有一个与计算的摘要值匹配。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">如果<span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>签名文件中不存在属性，或者在上一步中计算出的摘要值都不匹配，那么将执行优化程度较低的验证：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">如果<span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>-<span class="title">Main</span>-<span class="title">Attributes</span>签名文件中存在条目，请根据清单文件中主要属性计算的摘要来验证该值。如果此计算失败，则<span class="title">JAR</span>文件验证失败。可以记住这一决定以提高效率。如果<span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>-<span class="title">Main</span>-<span class="title">Attributes</span>签名文件中不存在某个 条目，则该条目的不存在不会影响<span class="title">JAR</span>文件验证，并且不会验证清单的主要属性。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">根据清单文件中相应条目计算的摘要值，验证签名文件中每个源文件信息部分中的摘要值。如果任何摘要值不匹配，则<span class="title">JAR</span>文件验证将失败。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">存储在<span class="title">x</span>-<span class="title">Digest</span>-<span class="title">Manifest</span>属性中的清单文件的摘要值可能与当前清单文件的摘要值不相等的原因之一是，在签名后（因此使用<span class="title">jar</span>工具）将一个或多个文件添加到<span class="title">JAR</span>文件中（使用<span class="title">jar</span>工具）。签名文件）已生成。当使用<span class="title">jar</span>工具添加文件时，清单文件将被更改（新文件将添加到节中），但签名文件没有被更改。如果自那时以来生成签名时<span class="title">JAR</span>文件中的文件均未更改，则仍然认为验证成功，如果签名文件的非标头部分中的摘要值等于摘要值，就是这种情况清单文件中相应部分的内容。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">对于清单中的每个条目，根据在“名称：”属性中指定的相对数据路径或<span class="title">URL</span>引用的实际数据计算的摘要，验证清单文件中的摘要值。如果任何摘要值不匹配，则<span class="title">JAR</span>文件验证将失败。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">清单文件示例：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">清单版本：1.0</span></span><br><span class="line"><span class="class">创建者：1.7.0（<span class="title">Sun</span> <span class="title">Microsystems</span> <span class="title">Inc</span>.）</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">名称：<span class="title">common</span> / <span class="title">class1</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">SHA</span>-256-摘要：（<span class="title">SHA</span>-256摘要的<span class="title">base64</span>表示形式）</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">名称：<span class="title">common</span> / <span class="title">class2</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">SHA1</span>-<span class="title">Digest</span>：（<span class="title">SHA1</span>摘要的<span class="title">base64</span>表示形式）</span></span><br><span class="line"><span class="class"><span class="title">SHA</span>-256-摘要：（<span class="title">SHA</span>-256摘要的<span class="title">base64</span>表示形式）</span></span><br><span class="line"><span class="class">相应的签名文件为：</span></span><br><span class="line"><span class="class">签名版本：1.0</span></span><br><span class="line"><span class="class"><span class="title">SHA</span>-256-<span class="title">Digest</span>-<span class="title">Manifest</span>：（<span class="title">SHA</span>-256摘要的<span class="title">base64</span>表示）</span></span><br><span class="line"><span class="class"><span class="title">SHA</span>-256-<span class="title">Digest</span>-<span class="title">Manifest</span>-<span class="title">Main</span>-<span class="title">Attributes</span>：（<span class="title">SHA</span>-256摘要的<span class="title">base64</span>表示形式）</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">名称：<span class="title">common</span> / <span class="title">class1</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">SHA</span>-256-摘要：（<span class="title">SHA</span>-256摘要的<span class="title">base64</span>表示形式）</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">名称：<span class="title">common</span> / <span class="title">class2</span>.<span class="title">class</span></span></span><br><span class="line"><span class="class"><span class="title">SHA</span>-256-摘要：（<span class="title">SHA</span>-256摘要的<span class="title">base64</span>表示形式）</span></span><br><span class="line"><span class="class">魔术属性</span></span><br><span class="line"><span class="class">验证给定清单条目上的签名的另一个要求是，验证者应了解该条目清单清单中的<span class="title">Magic</span> <span class="title">Key</span> <span class="title">Pair</span>值的值。</span></span><br><span class="line"><span class="class"><span class="title">Magic</span>属性是可选的，但如果要验证条目的签名，则解析器需要了解该条目的<span class="title">Magic</span>键的值。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">Magic</span>属性的一个或多个值是一组用逗号分隔的上下文特定的字符串。逗号前后的空格将被忽略。大小写被忽略。魔术属性的确切含义是特定于应用程序的。这些值指示如何计算清单条目中包含的哈希值，因此对于正确验证签名至关重要。关键字可以用于动态或嵌入式内容，用于多种语言文档的多个哈希等。</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">这是清单文件中潜在使用<span class="title">Magic</span>属性的两个示例：</span></span><br><span class="line"><span class="class"></span></span><br><span class="line">        名称：http://www.example-scripts.com/index#script1</span><br><span class="line">        SHA-<span class="number">256</span>-摘要：（SHA-<span class="number">256</span>哈希的base64表示形式）</span><br><span class="line">        魔术：JavaScript，动态</span><br><span class="line"></span><br><span class="line">        名称：http:<span class="comment">//www.example-tourist.com/guide.html</span></span><br><span class="line">        SHA-<span class="number">256</span>-摘要：（SHA-<span class="number">256</span>哈希的base64表示形式）</span><br><span class="line">        SHA-<span class="number">256</span>-Digest-French：（SHA-<span class="number">256</span>哈希的base64表示形式）</span><br><span class="line">        SHA-<span class="number">256</span>-Digest-German：（SHA-<span class="number">256</span>哈希的base64表示形式）</span><br><span class="line">        魔术：多语种</span><br><span class="line">在第一个示例中，这些Magic值可以指示http查询的结果是嵌入在文档中的脚本（与文档本身相反），并且该脚本是动态生成的。这两条信息指示如何计算与清单的摘要值进行比较的哈希值，从而比较有效的签名。</span><br><span class="line"></span><br><span class="line">在第二个示例中，Magic值指示所检索的文档可能已针对特定语言进行了内容协商，并且要进行验证的摘要取决于所检索的文档所使用的语言。</span><br><span class="line"></span><br><span class="line">数字签名</span><br><span class="line">数字签名是.SF 签名文件的签名版本。这些是二进制文件，不应被人类解释。</span><br><span class="line">数字签名文件的文件名与.SF文件相同，但扩展名不同。扩展名取决于数字签名的类型。</span><br><span class="line"></span><br><span class="line">.RSA （PKCS7签名，SHA-<span class="number">256</span> + RSA）</span><br><span class="line">.DSA （PKCS7签名，DSA）</span><br><span class="line">上面未列出的用于签名算法的数字签名文件必须位于META-INF目录中，并且前缀为“ SIG-”。相应的签名文件（.SFfile）也必须具有相同的前缀。</span><br><span class="line">对于那些不支持外部签名数据的格式，文件应包含文件的签名副本.SF。因此，某些数据可能会重复，验证者应该比较这两个文件。</span><br><span class="line"></span><br><span class="line">支持外部数据的格式要么引用 .SF文件，要么使用隐式引用对其执行计算。</span><br><span class="line"></span><br><span class="line">每个.SF文件可能具有多个数字签名，但这些签名应由同一法人实体生成。</span><br><span class="line"></span><br><span class="line">文件扩展名可以是<span class="number">1</span>到<span class="number">3</span> 个字母数字字符。无法识别的扩展名将被忽略。</span><br><span class="line"></span><br><span class="line">清单文件和签名文件的注意事项</span><br><span class="line">以下是适用于清单文件和签名文件的其他限制和规则的列表。</span><br><span class="line">解析之前：</span><br><span class="line">如果文件的最后一个字符是EOF字符（代码<span class="number">26</span>），则EOF被视为空白。追加了两个换行符（一个用于不将换行符放在最后一行末尾的编辑器，而另一个则是为了使语法不必对最后一个条目进行特殊大写，因为最后一个条目后可能没有空行）。</span><br><span class="line">属性：</span><br><span class="line">在所有情况下，对于所有部分，都将忽略不了解的属性。</span><br><span class="line">属性名称不区分大小写。但是，生成清单和签名文件的程序应使用本规范中所示的情况。</span><br><span class="line">属性名称不能在节中重复。</span><br><span class="line">版本：</span><br><span class="line">Manifest-Version和Signature-Version必须是第一个，并且在这种情况下必须如此（以便可以轻松地将它们识别为魔术字符串）。除此之外，主要部分中的属性顺序并不重要。</span><br><span class="line">订购：</span><br><span class="line">各个清单条目的顺序并不重要。</span><br><span class="line">各个签名条目的顺序并不重要，只是要签名的摘要按该顺序排列。</span><br><span class="line">行长：</span><br><span class="line">以UTF8编码的形式，任何行都不能超过<span class="number">72</span>个字节（不是字符）。如果某个值会使初始行长于此长度，则应在额外的行上继续（每行以单个SPACE开头）。</span><br><span class="line">错误：</span><br><span class="line">如果根据该规范无法解析文件，则应输出警告，并且任何签名均不可信任。</span><br><span class="line">局限性：</span><br><span class="line">因为标头名称不能连续，所以标头名称的最大长度为<span class="number">70</span>个字节（名称后必须有一个冒号和一个空格）。</span><br><span class="line">NUL，CR和LF不能嵌入标头值中，而NUL，CR，LF和“：”不能嵌入标头名中。</span><br><span class="line">实现应支持<span class="number">65535</span>字节（非字符）头值，以及每个文件<span class="number">65535</span>头。它们可能会用完内存，但是在这些值以下不应有硬编码的限制。</span><br><span class="line">签名人：</span><br><span class="line">从技术上讲，不同的实体可能会使用不同的签名算法来共享单个签名文件。这违反了标准，多余的签名可能会被忽略。</span><br><span class="line">算法：</span><br><span class="line">此标准不要求摘要算法或签名算法。但是，必须至少支持MD5和SHA1摘要算法之一。</span><br><span class="line">JAR指数</span><br><span class="line">总览</span><br><span class="line">从<span class="number">1.3</span>开始，引入JarIndex来优化网络应用程序（尤其是小应用程序）的类加载器的类搜索过程。最初，applet类加载器使用简单的线性搜索算法来搜索其内部搜索路径中的每个元素，该内部搜索路径是由“ ARCHIVE”标签或“ Class-Path”主属性构造的。类加载器将下载并打开其搜索路径中的每个元素，直到找到该类或资源为止。如果类加载器尝试查找不存在的资源，则必须下载应用程序或applet中的所有jar文件。对于大型网络应用程序和小程序，这可能导致启动缓慢，响应缓慢以及网络带宽浪费。JarIndex机制收集小程序中定义的所有jar文件的内容，并将信息存储在小程序类路径上第一个jar文件的索引文件中。在下载第一个jar文件之后，小应用程序类加载器将使用收集的内容信息来高效下载jar文件。</span><br><span class="line">现有的jar工具得到了增强，可以检查jar文件列表并生成有关哪些类和资源驻留在哪个jar文件中的目录信息。此目录信息存储在根jar文件的META-INF目录中名为INDEX.LIST的简单文本 文件中。当类加载器加载根jar文件时，它将读取INDEX.LIST文件，并使用它来构建从文件名和程序包名到jar文件名列表的映射的哈希表。为了找到类或资源，类加载器查询哈希表以找到合适的jar文件，然后在必要时下载它。</span><br><span class="line"></span><br><span class="line">一旦类加载器在特定的jar文件中找到INDEX.LIST文件，它就始终信任其中列出的信息。如果找到特定类的映射，但类加载器无法通过跟踪链接找到它，则抛出InvalidJarIndexException。发生这种情况时，应用程序开发人员应在扩展名上重新运行jar工具，以将正确的信息获取到索引文件中。</span><br><span class="line"></span><br><span class="line">为了防止在应用程序中增加过多的空间开销并加快内存中哈希表的构建，INDEX.LIST文件应保持尽可能小。对于具有非空包名称的类，映射记录在包级别。通常，一个程序包名称映射到一个jar文件，但是如果一个特定的程序包跨越一个以上的jar文件，则此程序包的映射值将是jar文件列表。对于具有非空目录前缀的资源文件，映射也记录在目录级别。仅对于包名称为空的类以及位于根目录中的资源文件，映射将在单个文件级别记录。</span><br><span class="line"></span><br><span class="line">索引文件规范</span><br><span class="line">所述INDEX.LIST文件包含一个或多个部分，每个部分分离由单个空行。每个部分都定义了特定jar文件的内容，其中的标头定义了jar文件的路径名，其后是包或文件名的列表，每行一个。所有的jar文件路径都相对于根jar文件的代码库。这些路径名的解析方式与当前扩展机制对捆绑扩展名的解析方式相同。</span><br><span class="line">UTF-<span class="number">8</span>编码用于支持索引文件中文件名或包名中的非ASCII字符。</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">规格</span><br><span class="line">    索引文件：版本信息空白行部分*</span><br><span class="line">    版本信息：               JarIndex版本： 版本号</span><br><span class="line">    版本号：数字+ &#123; 。digit +&#125; *</span><br><span class="line">    部分：主体空白行</span><br><span class="line">    主体：标题名称*</span><br><span class="line">    标题：<span class="keyword">char</span> + .jar 换行</span><br><span class="line">    名称：<span class="keyword">char</span> +换行</span><br><span class="line">    字符：除 NULL，CR 和LF 之外的任何有效Unicode字符</span><br><span class="line">    空白行：newline newline</span><br><span class="line">    newline：                       CR LF | 低频| CR（不跟 LF）</span><br><span class="line">    数字：                           &#123; <span class="number">0</span>-<span class="number">9</span> &#125;</span><br><span class="line"> </span><br><span class="line">的INDEX.LIST文件通过运行产生罐子-i。有关更多详细信息，请参见jar手册页。</span><br><span class="line">向后兼容</span><br><span class="line">新的类加载方案与在当前扩展机制之上开发的应用程序完全向后兼容。当类加载器加载第一个jar文件并在META-INF 目录中找到INDEX.LIST文件时，它将构造索引哈希表，并对扩展使用新的加载方案。否则，类加载器将仅使用原始的线性搜索算法。</span><br><span class="line">服务提供者</span><br><span class="line">总览</span><br><span class="line">在文件META-INF /服务目录是服务供应商的配置文件。服务是一组著名的接口和（通常是抽象的）类。服务提供者是服务的特定实现。提供程序中的类通常实现接口，并子类化服务本身中定义的类。服务提供者可以扩展的形式安装在Java平台的实现中，也就是说，将jar文件放置在任何常用扩展目录中。也可以通过将提供程序添加到applet或应用程序类路径或通过其他某些特定于平台的方式来使提供程序可用。</span><br><span class="line"></span><br><span class="line">服务由抽象类表示。给定服务的提供者包含一个或多个具体类，这些类通过特定于该提供者的数据和代码扩展该服务类。该提供程序类通常不是整个提供程序本身，而是包含足够信息以决定提供程序是否能够满足特定请求以及可以按需创建实际提供程序的代码的代理。提供程序类的细节往往是高度特定于服务的；没有单个类或接口可能会统一它们，因此尚未定义此类。此处强制执行的唯一要求是，提供程序类必须具有零参数构造函数，以便可以在查找过程中实例化它们。</span><br><span class="line"></span><br><span class="line">提供者配置文件</span><br><span class="line">服务提供者通过将提供者配置文件放在资源目录META-INF / services中来标识自己 。文件名应包含抽象服务类的标准名称。该文件应包含以换行符分隔的唯一的具体提供程序类名称的列表。空格和制表符以及空白行将被忽略。注释字符为“＃”（<span class="number">0x23</span>）；在每一行中，第一个注释字符之后的所有字符都将被忽略。该文件必须使用UTF-<span class="number">8</span>编码。</span><br><span class="line"></span><br><span class="line">例</span><br><span class="line">假设我们有一个名为java.io.spi.CharCodec的服务类。它有两种抽象方法：</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> CharEncoder <span class="title">getEncoder</span><span class="params">(String encodingName)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> CharDecoder <span class="title">getDecoder</span><span class="params">(String encodingName)</span></span>;</span><br><span class="line">每个方法都返回一个适当的对象，如果不能转换给定的编码，则返回<span class="keyword">null</span>。典型的CharCodec提供程序将支持多个编码。</span><br><span class="line"></span><br><span class="line">如果sun.io.StandardCodec是CharCodec服务的提供者，则其jar文件将包含文件 META-INF / services / java.io.spi.CharCodec。该文件将包含单行：</span><br><span class="line"></span><br><span class="line">sun.io.StandardCodec＃平台的标准编解码器</span><br><span class="line">要找到给定编码名称的编码器，内部I / O代码将执行以下操作：</span><br><span class="line"></span><br><span class="line">   CharEncoder getEncoder（String encodingName）&#123;</span><br><span class="line">       迭代器ps = Service.providers（CharCodec<span class="class">.<span class="keyword">class</span>）</span>;</span><br><span class="line">       <span class="keyword">while</span>（ps.hasNext（））&#123;</span><br><span class="line">           CharCodec cc =（CharCodec）ps.next（）;</span><br><span class="line">           CharEncoder ce = cc.getEncoder（encodingName）;</span><br><span class="line">           如果（ce！= <span class="keyword">null</span>）</span><br><span class="line">               返回ce</span><br><span class="line">       &#125;</span><br><span class="line">       返回<span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">提供者查找机制始终在调用者的安全上下文中执行。受信任的系统代码通常应从特权安全上下文中调用此类中的方法。</span><br><span class="line"></span><br><span class="line">类路径属性</span><br><span class="line">应用程序的清单可以指定一个或多个相对URL，这些URL引用其所需的其他库的JAR文件和目录。这些相对URL相对于从中加载包含应用程序的代码库进行处理。</span><br><span class="line"></span><br><span class="line">应用程序（或更一般而言，是JAR文件）使用manifest属性指定了所需的库的相对URL Class-Path。如果在宿主Java虚拟机上找不到其他库的实现，则此属性列出了URL，以搜索这些库的实现。这些相对URL可能包括应用程序所需的任何库或资源的JAR文件和目录。不以反斜杠（/）结尾的相对URL 被假定为引用JAR文件。例如：</span><br><span class="line"></span><br><span class="line">类路径：servlet.jar infobus.jar acme / beans.jar images /</span><br><span class="line">Class-PathJAR文件的清单中最多可以指定一个标头。</span><br><span class="line"></span><br><span class="line">当前，出于安全原因，URL必须相对于JAR文件的代码库。因此，远程可选包将源自与应用程序相同的代码库。</span><br><span class="line"></span><br><span class="line">每个相对URL都是根据加载了包含应用程序或库的代码库解析的。如果结果URL无效或引用了找不到的资源，则将其忽略。</span><br><span class="line"></span><br><span class="line">通过将URL插入紧随包含JAR文件的URL的类路径中，将所得的URL用于扩展应用程序，applet或servlet的类路径。省略所有重复的URL。例如，给出以下类路径：</span><br><span class="line"></span><br><span class="line">a.jar b.jar</span><br><span class="line">假设b.jar包含以下 Class-Path清单属性：</span><br><span class="line"></span><br><span class="line">类路径：x.jar a.jar</span><br><span class="line">结果，生成的应用程序类路径将如下所示：</span><br><span class="line"></span><br><span class="line">a.jar b.jar x.jar</span><br><span class="line">如果x.jar具有自己的依赖关系，则将根据每个后续URL的相同规则添加这些依赖关系。在实际的实现中，对JAR文件的依赖关系被延迟处理，因此，直到需要时才打开JAR文件。</span><br><span class="line"></span><br><span class="line">包装封口</span><br><span class="line">可以选择密封 JAR文件和程序包，以便程序包可以在版本中强制保持一致性。</span><br><span class="line"></span><br><span class="line">封装在JAR中的程序包指定该程序包中定义的所有类都必须源自同一JAR。否则，将 SecurityException引发a。</span><br><span class="line"></span><br><span class="line">密封的JAR指定密封该JAR定义的所有程序包，除非专门为程序包覆盖。</span><br><span class="line"></span><br><span class="line">密封的包是通过manifest属性指定的，该属性 Sealed的值为trueor <span class="keyword">false</span> （与大小写无关）。例如：</span><br><span class="line"></span><br><span class="line">名称：javax / servlet / internal /</span><br><span class="line">密封：真实</span><br><span class="line">这指定javax.servlet.internal包是密封的，并且必须从同一JAR文件加载该包中的所有类。</span><br><span class="line"></span><br><span class="line">如果缺少此属性，则包密封属性是包含JAR文件的属性。</span><br><span class="line"></span><br><span class="line">密封的JAR通过相同的清单标头指定 Sealed，再次使用<span class="keyword">true</span>或 值<span class="keyword">false</span>。例如：</span><br><span class="line"></span><br><span class="line">密封：真实</span><br><span class="line">这指定将密封此归档文件中的所有程序包，除非Sealed使用清单条目中的属性为特定程序包显式覆盖 。</span><br><span class="line"></span><br><span class="line">如果缺少此属性，则为了向后兼容，假定JAR文件 未密封。然后，系统默认检查包装标头中的密封信息。</span><br><span class="line"></span><br><span class="line">程序包密封对于安全性也很重要，因为它会将对程序包保护的成员的访问限制为仅在程序包中定义的源自同一JAR文件的那些类。</span><br><span class="line"></span><br><span class="line">未命名的程序包不可密封，因此必须将要密封的类放在自己的程序包中。</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/03/18/jar%E6%96%87%E4%BB%B6%E8%A7%84%E8%8C%83/" data-id="ck7xfhuya0004o4vlefyp8icq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/03/18/Windows%E4%B8%8BCmder%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Windows下Cmder的配置与使用
        
      </div>
    </a>
  
  
    <a href="/2020/03/18/Solr%20schema.xml%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Solr schema.xml配置详解</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/03/18/Tomcat%20%E4%B8%93%E9%A2%98/">Tomcat 专题</a>
          </li>
        
          <li>
            <a href="/2020/03/18/%E7%B2%BE%E9%80%9ASpring%20Boot%E4%B8%8ECloud/">精通Spring Boot与Cloud</a>
          </li>
        
          <li>
            <a href="/2020/03/18/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/03/18/Windows%E4%B8%8BCmder%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/">Windows下Cmder的配置与使用</a>
          </li>
        
          <li>
            <a href="/2020/03/18/jar%E6%96%87%E4%BB%B6%E8%A7%84%E8%8C%83/">jar文件规范</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 xiaohua<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">tags</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>